import React from "react";
import styles from "./VulnerabilitiesBlock.module.scss";

type Props = {
  label: string;
  count: number;
  delta: string;
  colorClass: string;
};

const deltaColor = (delta: string) => {
  if (delta.startsWith("+")) return styles.deltaNegative; // увеличение уязвимостей - плохо (красный)
  if (delta.startsWith("-")) return styles.deltaPositive; // уменьшение уязвимостей - хорошо (зеленый)
  return "";
};

const VulnerabilityItem: React.FC<Props> = ({
  label,
  count,
  delta,
  colorClass,
}) => {
  const backgroundClass = colorClass.replace('critical', 'criticalBg')
                                   .replace('medium', 'mediumBg')
                                   .replace('low', 'lowBg');
  
  return (
    <div className={`${styles.item} ${backgroundClass}`}>
      <div className={`${styles.count} ${colorClass}`}>{count}</div>
      <div className={styles.label}>{label}</div>
      <div className={`${styles.delta} ${deltaColor(delta)}`}>
        {`${delta} за неделю`} 
      </div>
    </div>
  );
};

export default VulnerabilityItem;
